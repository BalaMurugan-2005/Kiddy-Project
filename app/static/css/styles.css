/* Theme primitives */
.glass {
	backdrop-filter: blur(10px);
	background: rgba(255, 255, 255, 0.55);
	border: 1px solid rgba(255, 255, 255, 0.35);
}

/* App container + background themes (example layout support) */
:root {
	--bg-default: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
	--bg-voice: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%);
	--bg-story: linear-gradient(135deg, #fbc2eb 0%, #a6c1ee 100%);
	--bg-video: linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%);
	--bg-grades: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
	--bg-settings: linear-gradient(135deg, #e0eafc 0%, #cfdef3 100%);
}
.app-container {
	display: flex; flex-direction: column;
	min-height: 100vh; width: 100%;
	background: var(--bg-default);
	transition: background 0.8s ease;
	position: relative;
	overflow: hidden;
}

/* Animated gradient orbs background (subtle) */
.bg-orbs { position: absolute; inset: 0; pointer-events: none; filter: blur(32px); opacity: 0.5; }
.bg-orbs .orb { position: absolute; width: 38vmin; height: 38vmin; border-radius: 50%; mix-blend-mode: screen; }
.bg-orbs .orb-a { left: -8vmin; top: 10vmin; background: radial-gradient(circle at 30% 30%, #a78bfa, transparent 60%); animation: floatA 18s ease-in-out infinite; }
.bg-orbs .orb-b { right: -10vmin; top: 20vmin; background: radial-gradient(circle at 30% 30%, #60a5fa, transparent 60%); animation: floatB 22s ease-in-out infinite; }
.bg-orbs .orb-c { left: 30%; bottom: -12vmin; background: radial-gradient(circle at 30% 30%, #34d399, transparent 60%); animation: floatC 26s ease-in-out infinite; }
@keyframes floatA { 0%,100%{ transform: translateY(0)} 50%{ transform: translateY(-18px)} }
@keyframes floatB { 0%,100%{ transform: translate(0,0)} 50%{ transform: translate(-16px, 10px)} }
@keyframes floatC { 0%,100%{ transform: translateX(0)} 50%{ transform: translateX(16px)} }

/* Floating circle buttons */
.circle-btn {
	@apply w-12 h-12 rounded-full shadow-lg grid place-items-center text-xl;
	background: radial-gradient(100% 100% at 70% 0%, #ffffff 0%, #e9ddff 100%);
	border: 1px solid rgba(167, 139, 250, 0.5);
	transition: transform 200ms ease, box-shadow 200ms ease;
}
.circle-btn:hover { transform: translateY(-2px) scale(1.05); box-shadow: 0 12px 30px rgba(167,139,250,0.35); }
.circle-btn:active { transform: translateY(0) scale(0.98); }

/* Example-style side buttons */
.side-buttons { position: fixed; top: 50%; transform: translateY(-50%); display: flex; flex-direction: column; gap: 1rem; z-index: 100; }
.side-buttons.left { left: 20px; }
.side-buttons.right { right: 20px; }
.side-btn { height: 50px; width: 50px; border-radius: 50%; transition: box-shadow 250ms ease; }
.side-btn.active { box-shadow: 0 0 0 4px rgba(255,255,255,0.6), 0 18px 36px rgba(0,0,0,0.15); }
.side-btn[data-panel="voice"].active { background: radial-gradient(120% 120% at 80% 10%, #e0f2fe, #dbeafe 60%, #ede9fe); }
.side-btn[data-panel="story"].active { background: radial-gradient(120% 120% at 80% 10%, #ffe4e6, #fff1f2 60%, #f3e8ff); }
.side-btn[data-panel="video"].active { background: radial-gradient(120% 120% at 80% 10%, #f0abfc, #a7f3d0 60%, #e0e7ff); }
.side-btn[data-panel="grades"].active { background: radial-gradient(120% 120% at 80% 10%, #fef3c7, #ffffff 60%, #fde68a); }
.side-btn[data-panel="settings"].active { background: radial-gradient(120% 120% at 80% 10%, #e2e8f0, #ffffff 60%, #f1f5f9); }

/* Side panels */
.side-panel {
	position: fixed;
	top: 0;
	bottom: 0;
	width: 360px;
	max-width: 85vw;
	z-index: 20;
	padding: 84px 16px 16px 16px;
	transform: translateX(-110%);
	transition: transform 520ms cubic-bezier(.22,.61,.36,1);
}
.side-panel.right { right: 0; left: auto; transform: translateX(110%); }
.side-panel.open.left { transform: translateX(0%); }
.side-panel.open.right { transform: translateX(0%); }
.panel { /* compatibility with example 'panel' class */
	height: 100vh; width: 360px; max-width: 85vw;
}
.panel.active { /* when used with example JS */ transform: translateX(0%); }
.panel-content {
	@apply glass rounded-3xl p-5 shadow-xl;
	height: calc(100vh - 120px);
	overflow: auto;
	box-shadow: 0 18px 40px rgba(0,0,0,0.12);
}
.panel-title { @apply text-xl font-extrabold mb-2; }

/* Microphone visual */
.mic-visual {
	@apply rounded-2xl relative overflow-hidden;
	height: 120px;
	background: linear-gradient(135deg, #bae6fd, #bfdbfe, #ddd6fe);
}
.mic-dot {
	position: absolute; left: 50%; top: 50%;
	transform: translate(-50%, -50%);
	width: 18px; height: 18px; border-radius: 50%;
	background: #0ea5e9;
	box-shadow: 0 0 20px rgba(14, 165, 233, 0.6);
	animation: pulse 1.2s infinite ease-in-out;
}
.mic-wave {
	position: absolute; inset: 0; opacity: 0.7;
	background: radial-gradient(50% 50% at 50% 50%, rgba(14,165,233,0.25) 0%, rgba(14,165,233,0) 70%);
	animation: breathe 3s infinite ease-in-out;
}
@keyframes pulse {
	0%, 100% { transform: translate(-50%, -50%) scale(1); }
	50% { transform: translate(-50%, -50%) scale(1.15); }
}
@keyframes breathe {
	0%, 100% { transform: scale(1); }
	50% { transform: scale(1.05); }
}

/* Storybook */
.storybook {
	display: grid;
	grid-template-columns: repeat(3, minmax(0, 1fr));
	gap: 12px;
}
.storybook .page {
	@apply rounded-2xl p-4;
	min-height: 120px;
}

/* Video */
.video-wrap {
	@apply rounded-3xl p-3 mt-2;
}

/* Chat */
.chat-wrap {
	background: rgba(255, 255, 255, 0.6);
	border: 1px solid rgba(255, 255, 255, 0.4);
	box-shadow: 0 24px 60px rgba(0,0,0,0.10);
	animation: chatEnter 500ms ease;
}
.@keyframes chatEnter { from { transform: translateY(8px); opacity: 0 } to { transform: translateY(0); opacity: 1 } }
.chat-list .msg {
	display: flex; gap: 10px; align-items: flex-start;
	animation: msgIn 280ms ease;
}
.@keyframes msgIn { from { transform: translateY(6px); opacity: 0 } to { transform: translateY(0); opacity: 1 } }
.chat-list .msg .avatar {
	@apply w-8 h-8 rounded-full grid place-items-center text-base;
	background: #ffffff;
	border: 1px solid rgba(0,0,0,0.05);
	box-shadow: 0 2px 10px rgba(0,0,0,0.05);
}
.chat-list .msg .bubble {
	@apply rounded-2xl px-4 py-3 leading-relaxed;
	max-width: 85%;
	background: linear-gradient(180deg, rgba(255,255,255,0.8), rgba(255,255,255,0.6));
	border: 1px solid rgba(0,0,0,0.05);
}
.chat-list .msg.user .bubble {
	background: linear-gradient(180deg, #eef2ff, #e9d5ff);
}
.typing {
	display: inline-flex; gap: 4px; align-items: center;
}
.typing .dot {
	width: 6px; height: 6px; border-radius: 50%; background: #64748b;
	animation: blink 1.2s infinite ease-in-out;
}
.typing .dot:nth-child(2) { animation-delay: 0.2s; }
.typing .dot:nth-child(3) { animation-delay: 0.4s; }
@keyframes blink {
	0%, 100% { opacity: 0.2; transform: translateY(0); }
	50% { opacity: 1; transform: translateY(-2px); }
}

/* Inputs and Buttons */
.input {
	@apply rounded-2xl px-3 py-2 bg-white shadow-sm border border-slate-200 outline-none;
	transition: box-shadow 220ms ease, border-color 220ms ease;
}
.input:focus { box-shadow: 0 0 0 4px rgba(167,139,250,0.25); border-color: rgba(167,139,250,0.55); }
.btn-primary {
	@apply rounded-2xl px-4 py-2 font-bold text-white shadow;
	background: linear-gradient(135deg, #60a5fa, #a78bfa);
	transition: transform 160ms ease, box-shadow 200ms ease;
}
.btn-primary:hover { transform: translateY(-1px); box-shadow: 0 12px 24px rgba(96,165,250,0.35); }
.btn-secondary {
	@apply rounded-2xl px-4 py-2 font-bold text-slate-700 border;
	background: white;
	transition: transform 160ms ease, box-shadow 200ms ease;
}
.btn-secondary:hover { transform: translateY(-1px); box-shadow: 0 10px 18px rgba(0,0,0,0.06); }
.btn-chip {
	@apply rounded-full px-3 py-1 border text-slate-600 bg-white;
	transition: box-shadow 160ms ease, transform 160ms ease;
}
.btn-chip:hover { transform: translateY(-1px); box-shadow: 0 8px 16px rgba(0,0,0,0.06); }
.inline-voice {
	position: absolute; left: 8px; top: 50%; transform: translateY(-50%);
	font-size: 18px;
}
.input-actions {
	position: absolute; right: 8px; top: 50%; transform: translateY(-50%);
	display: inline-flex; gap: 6px;
}
.icon-btn {
	width: 28px; height: 28px; border-radius: 999px;
	display: grid; place-items: center; font-size: 14px;
	background: #ffffff; border: 1px solid rgba(0,0,0,0.08);
	box-shadow: 0 2px 6px rgba(0,0,0,0.05);
	transition: transform 140ms ease, box-shadow 200ms ease, background 200ms ease;
}
.icon-btn:hover { transform: translateY(-1px); box-shadow: 0 8px 16px rgba(0,0,0,0.08); background: #f8fafc; }
.send-btn {
	@apply rounded-2xl px-4 py-2 font-bold text-white shadow;
	background: linear-gradient(135deg, #34d399, #60a5fa);
	transition: transform 160ms ease, box-shadow 200ms ease;
}
.send-btn:hover { transform: translateY(-1px); box-shadow: 0 16px 28px rgba(52,211,153,0.3); }
.setting-row { @apply flex items-center justify-between; }
.setting-label { @apply text-slate-600; }

/* Mention menu */
.mention-menu {
	position: absolute; left: 12px; bottom: 44px; z-index: 10;
	background: white; border: 1px solid rgba(0,0,0,0.08);
	box-shadow: 0 6px 20px rgba(0,0,0,0.08);
	border-radius: 12px; padding: 6px;
	display: grid; gap: 4px;
}
.mention-menu.hidden { display: none; }
.mention-menu button {
	@apply px-3 py-1 rounded-lg text-sm;
	background: #f8fafc;
}
.mention-menu button:hover { background: #eef2ff; }

/* Attach preview */
.attach-preview {
	display: flex; gap: 6px; flex-wrap: wrap;
}
.attach-preview .thumb {
	position: relative; width: 44px; height: 44px; border-radius: 10px; overflow: hidden;
	border: 1px solid rgba(0,0,0,0.08);
}
.attach-preview .thumb img { width: 100%; height: 100%; object-fit: cover; }
.attach-preview .thumb .x {
	position: absolute; right: 2px; top: 2px; width: 18px; height: 18px;
	border-radius: 999px; background: rgba(255,255,255,0.9);
	display: grid; place-items: center; font-size: 12px;
	border: 1px solid rgba(0,0,0,0.08);
}
.attach-preview.hidden { display: none; }

/* Toggle switch */
.switch { position: relative; display: inline-block; width: 46px; height: 24px; }
.switch input { opacity: 0; width: 0; height: 0; }
.slider {
	position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0;
	background-color: #cbd5e1; transition: .2s; border-radius: 999px;
}
.slider:before {
	position: absolute; content: ""; height: 18px; width: 18px; left: 3px; bottom: 3px;
	background-color: white; transition: .2s; border-radius: 999px;
}
input:checked + .slider { background-color: #a78bfa; }
input:checked + .slider:before { transform: translateX(22px); }

/* Dynamic theme classes per panel */
.theme-voice { background-image: linear-gradient(135deg, #e0f2fe, #dbeafe, #ede9fe) !important; }
.theme-story { background-image: linear-gradient(135deg, #ffe4e6, #fff1f2, #ffffff) !important; }
.theme-video { background-image: linear-gradient(135deg, #f0abfc, #a7f3d0) !important; }
.theme-grades { background-image: linear-gradient(135deg, #fef3c7, #ffffff) !important; }
.theme-settings { background-image: linear-gradient(135deg, #e2e8f0, #ffffff) !important; }

/* Colored mode chips */
.mode-chat { background: linear-gradient(135deg, #e0e7ff, #f3e8ff); }
.mode-story { background: linear-gradient(135deg, #ffe4e6, #fff1f2); }
.mode-explain { background: linear-gradient(135deg, #ccfbf1, #e0f2fe); }

/* Search results styling in chat */
.search-card {
	@apply rounded-xl p-3;
	background: #ffffff;
	border: 1px solid rgba(0,0,0,0.06);
}
.search-card a { color: #2563eb; }

/* Dark mode handling */
.dark body, body.dark {
	color: #e2e8f0;
	background-image: linear-gradient(135deg, #0b1020, #131a2a, #1f2a44) !important;
}
.dark .glass, body.dark .glass {
	background: rgba(20, 24, 40, 0.55);
	border-color: rgba(255,255,255,0.06);
}

/* Smooth scrollbar */
* { scrollbar-width: thin; scrollbar-color: rgba(148,163,184,0.6) transparent; }
*::-webkit-scrollbar { height: 8px; width: 8px; }
*::-webkit-scrollbar-thumb { background: rgba(148,163,184,0.6); border-radius: 8px; }
*::-webkit-scrollbar-track { background: transparent; }

/* Motion preference */
@media (prefers-reduced-motion: reduce) {
	.bg-orbs, .chat-list .msg, .chat-wrap, .circle-btn, .btn-primary, .btn-secondary, .btn-chip, .icon-btn, .send-btn {
		animation: none !important;
		transition: none !important;
	}
}

